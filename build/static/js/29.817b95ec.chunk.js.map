{"version":3,"sources":["pages/appointmentAsign/service.js","pages/appointmentAsign/hospitalModal.js"],"names":["getAppointAdminList","page","Fetch","appointAsign","id","data","getHospitalList","columns","title","dataIndex","key","align","HospitalModal","state","current","total","selectedRowKeys","getPageData","then","res","status","setState","dataSource","catch","e","console","log","onChangePage","onSelectChange","handleOk","length","props","message","error","preProps","this","visible","rowSelection","type","onChange","onOk","onCancel","bordered","pagination","rowKey","getRowKey","size","React","Component","defaultProps"],"mappings":"kGAAA,oKAEO,SAASA,IAA+B,IAAXC,EAAU,uDAAH,EACvC,OAAOC,YAAM,MAAD,kCAAmCD,EAAnC,gBAGT,SAASE,EAAaC,EAAIC,GAC7B,OAAOH,YAAM,MAAD,uBAAwBE,GAAMC,GAGvC,SAASC,IAA2B,IAAXL,EAAU,uDAAH,EACnC,OAAOC,YAAM,MAAD,yBAA0BD,EAA1B,gB,0LCNVM,EAAU,CACd,CACEC,MAAO,qBACPC,UAAW,OACXC,IAAK,OACLC,MAAO,WAIUC,E,2MAMnBC,MAAQ,CACNC,QAAS,EACTC,MAAO,EACPC,gBAAiB,I,EAUnBC,YAAc,WACZX,0BAAgB,EAAKO,MAAMC,SAC1BI,MAAK,SAACC,GACc,IAAfA,EAAIC,OAIR,EAAKC,SAAS,CAAEC,WAAY,KAH1B,EAAKD,SAAS,CAAEC,WAAYH,EAAId,KAAMU,MAAOI,EAAIJ,WAKpDQ,OAAM,SAACC,GACNC,QAAQC,IAAIF,O,EAGhBG,aAAe,SAAA1B,GACb,EAAKoB,SAAS,CACZP,QAASb,IACR,WACD,EAAKgB,kB,EAGTW,eAAiB,SAACZ,GAChBS,QAAQC,IAAI,kBAAmBV,GAC/B,EAAKK,SAAS,CAAEL,qB,EAElBa,SAAW,WACgC,IAAtC,EAAKhB,MAAMG,gBAAgBc,QAI9BL,QAAQC,IAAI,EAAKb,MAAMG,gBAAgB,IACvC,EAAKe,MAAMF,SAAS,EAAKhB,MAAMG,gBAAgB,KAJ7CgB,IAAQC,MAAM,mC,kFAlCCC,GACbC,KAAKJ,MAAMK,UAAYF,EAASE,SAAYF,EAASE,UACvDD,KAAKd,SAAS,CACZL,gBAAiB,KAEnBmB,KAAKlB,iB,+BAoCP,IAAMoB,EAAe,CACjBC,KAAM,QACNtB,gBAAiBmB,KAAKtB,MAAMG,gBAC5BuB,SAAUJ,KAAKP,gBAEnB,OACE,kBAAC,IAAD,CACEpB,MAAM,yDACN4B,QAASD,KAAKJ,MAAMK,QACpBI,KAAML,KAAKN,SACXY,SAAUN,KAAKJ,MAAMU,UAErB,kBAAC,IAAD,CACEC,UAAQ,EACRpB,WAAYa,KAAKtB,MAAMS,WACvBf,QAASA,EACToC,YAAY,EACZC,OAAQC,IACRC,KAAK,QACLT,aAAcA,S,GAvEmBU,IAAMC,WAA5BpC,EACZqC,aAAe,CACpBpB,SAAU","file":"static/js/29.817b95ec.chunk.js","sourcesContent":["import Fetch from '../../utils/fetch';\r\n\r\nexport function getAppointAdminList(page = 1) {\r\n    return Fetch('get', `/appointment/admin?page=${page}&limit=1000`);\r\n}\r\n\r\nexport function appointAsign(id, data) {\r\n    return Fetch('put', `/appointment/${id}`, data);\r\n}\r\n\r\nexport function getHospitalList(page = 1) {\r\n    return Fetch('get', `/hospital?page=${page}&limit=10`);\r\n}\r\n\r\n","import React from \"react\";\r\nimport { Modal, Table, message } from \"antd\";\r\nimport { getRowKey } from \"../../utils/util\";\r\nimport { getHospitalList } from './service';\r\n\r\nconst columns = [\r\n  {\r\n    title: \"医院名\",\r\n    dataIndex: \"name\",\r\n    key: \"name\",\r\n    align: \"center\"\r\n  }\r\n];\r\n\r\nexport default class HospitalModal extends React.Component {\r\n  static defaultProps = {\r\n    handleOk: () => {\r\n\r\n    }\r\n  }\r\n  state = {\r\n    current: 1,\r\n    total: 0,\r\n    selectedRowKeys: [],\r\n  };\r\n  componentDidUpdate(preProps){\r\n    if (this.props.visible !== preProps.visible && !preProps.visible) {\r\n      this.setState({\r\n        selectedRowKeys: [],\r\n      });\r\n      this.getPageData();\r\n    }\r\n  }\r\n  getPageData = () => {\r\n    getHospitalList(this.state.current)\r\n    .then((res) => {\r\n      if (res.status === 1) {\r\n        this.setState({ dataSource: res.data, total: res.total });\r\n        return;\r\n      }\r\n      this.setState({ dataSource: [] });\r\n    })\r\n    .catch((e) => {\r\n      console.log(e);\r\n    });\r\n  };\r\n  onChangePage = page => {\r\n    this.setState({\r\n      current: page,\r\n    }, () => {\r\n      this.getPageData();\r\n    });\r\n  };\r\n  onSelectChange = (selectedRowKeys) => {\r\n    console.log('selectedRowKeys', selectedRowKeys);\r\n    this.setState({ selectedRowKeys });\r\n  }\r\n  handleOk = () => {\r\n    if(this.state.selectedRowKeys.length === 0){\r\n      message.error('请选择医院');\r\n      return;\r\n    }\r\n    console.log(this.state.selectedRowKeys[0]);\r\n    this.props.handleOk(this.state.selectedRowKeys[0]);\r\n  }\r\n  render() {\r\n    const rowSelection = {\r\n        type: 'radio',\r\n        selectedRowKeys: this.state.selectedRowKeys,\r\n        onChange: this.onSelectChange,\r\n    };\r\n    return (\r\n      <Modal\r\n        title=\"请选择医院进行指派\"\r\n        visible={this.props.visible}\r\n        onOk={this.handleOk}\r\n        onCancel={this.props.onCancel}\r\n      >\r\n        <Table\r\n          bordered\r\n          dataSource={this.state.dataSource}\r\n          columns={columns}\r\n          pagination={false}\r\n          rowKey={getRowKey}\r\n          size=\"small\"\r\n          rowSelection={rowSelection}\r\n        />\r\n        {/* <div className=\"clearfix\">\r\n          <Pagination\r\n            current={this.state.current}\r\n            total={this.state.total}\r\n            onChange={this.onChangePage}\r\n            style={{ float: \"right\", marginTop: \"16px\" }}\r\n          />\r\n        </div> */}\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}