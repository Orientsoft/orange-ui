(this.webpackJsonptemp=this.webpackJsonptemp||[]).push([[17,33],{209:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var a=n(101),r=n(29),i=n(30),c=n(32),o=n(31),s=n(33),l=n(0),u=n.n(l),d=n(100),h=n(43),p=n(786),f=n(803),g=n(788),v=n(388),m=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(o.a)(t).call(this,e))).getPageData=function(){Object(v.getCheckNewsList)(n.state.current).then((function(e){if(1!==e.status)n.setState({dataSource:[]});else{var t=e.data.map((function(e){return e.operation?Object(a.a)({},e,{},e.operation):e}));n.setState({dataSource:t,total:e.total})}})).catch((function(e){console.log(e)}))},n.onChangePage=function(e){n.setState({current:e},(function(){n.getPageData()}))},n.showRejectModal=function(e){return function(){n.setState({visible:!0,selectRow:e})}},n.onCancel=function(){n.setState({visible:!1})},n.onPassCheck=function(e){return function(){Object(v.checkNews)({id:e,status:1,reason:""}).then((function(e){if(1===e.status)return d.a.success("\u64cd\u4f5c\u6210\u529f"),void n.getPageData();d.a.error("\u64cd\u4f5c\u5931\u8d25")})).catch((function(e){console.log(e)}))}},n.handleOk=function(e){Object(v.checkNews)({id:n.state.selectRow.id,status:0,reason:e}).then((function(e){if(1===e.status)return d.a.success("\u64cd\u4f5c\u6210\u529f"),n.onCancel(),void n.getPageData();d.a.error("\u64cd\u4f5c\u5931\u8d25")})).catch((function(e){console.log(e)}))},n.showPreview=function(e,t){return function(){n.setState({previewVisible:!0,previewImage:e,renderMode:t})}},n.previewHandleCancel=function(){n.setState({previewVisible:!1,previewImage:""})},n.state={renderMode:"",previewVisible:!1,previewImage:"",mode:"",visible:!1,current:1,total:0,dataSource:[],selectRow:{}},n}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getPageData()}},{key:"render",value:function(){var e=this,t=[{title:"\u533b\u9662",dataIndex:"hosp",key:"hosp",align:"center",render:function(e){return e?e.name:""}},{title:"\u65b0\u95fb\u6807\u9898",dataIndex:"name",key:"name",align:"center"},{title:"\u6807\u7b7e",dataIndex:"tag",key:"tag",align:"center",render:function(e){return e?e.join("\u3001"):null}},{title:"\u7b80\u4ecb",dataIndex:"desc",key:"desc",align:"center"},{title:"\u56fe\u7247",dataIndex:"pic",key:"pic",align:"center",render:function(t){return u.a.createElement("img",{onClick:e.showPreview(t),src:t,alt:"",style:{height:"20px"},className:"canClick"})}},{title:"\u65b0\u95fb\u5185\u5bb9",dataIndex:"content",key:"content",align:"center",render:function(t){return u.a.createElement("span",{className:"canClick",onClick:e.showPreview(t,"draft")},"\u8be6\u60c5")}},{title:"\u64cd\u4f5c",dataIndex:"action",key:"action",align:"center",width:200,render:function(t,n){return u.a.createElement("span",null,u.a.createElement(h.a,{type:"primary",style:{marginRight:"16px"},onClick:e.onPassCheck(n.id)},"\u901a\u8fc7"),u.a.createElement(h.a,{type:"danger",onClick:e.showRejectModal(n)},"\u9a73\u56de"))}}];return u.a.createElement("div",null,u.a.createElement(p.a,{current:this.state.current,total:this.state.total,columns:t,dataSource:this.state.dataSource,onChangePage:this.onChangePage}),u.a.createElement(f.a,{title:"\u8bf7\u586b\u5199\u9a73\u56de\u539f\u56e0",visible:this.state.visible,onCancel:this.onCancel,handleOk:this.handleOk}),u.a.createElement(g.a,{previewVisible:this.state.previewVisible,previewImage:this.state.previewImage,handleCancel:this.previewHandleCancel,renderMode:this.state.renderMode}))}}]),t}(u.a.Component)},388:function(e,t,n){"use strict";n.r(t),n.d(t,"getCheckNewsList",(function(){return r})),n.d(t,"checkNews",(function(){return i}));var a=n(68);function r(e){return Object(a.a)("get","/news/operation?page=".concat(e,"&limit=10"))}function i(e){return Object(a.a)("put","/news/check",e)}},786:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(29),r=n(30),i=n(32),c=n(31),o=n(33),s=n(0),l=n.n(s),u=n(1085),d=n(854),h=n(152),p=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.columns,n=e.dataSource,a=e.current,r=e.total,i=e.onChangePage;return console.log("total",r),l.a.createElement("div",{style:{marginTop:"16px"}},l.a.createElement(u.a,{bordered:!0,dataSource:n,columns:t,pagination:!1,rowKey:h.c,size:"small"}),l.a.createElement("div",{className:"clearfix"},l.a.createElement(d.a,{current:a,total:r,onChange:i,style:{float:"right",marginTop:"16px"}})))}}]),t}(l.a.Component)},788:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(29),r=n(30),i=n(32),c=n(31),o=n(33),s=n(0),l=n.n(s),u=n(777),d=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.previewVisible,n=e.previewImage,a=e.handleCancel,r=e.renderMode;return console.log("renderMode",r),l.a.createElement(u.a,{visible:t,footer:null,onCancel:a,title:"\u9884\u89c8",width:1024},l.a.createElement("div",{style:{height:"800px"},className:"clearfix"},"draft"===r?l.a.createElement("div",{dangerouslySetInnerHTML:{__html:n}}):l.a.createElement("img",{alt:"example",style:{width:"100%",height:"100%"},src:n})))}}]),t}(l.a.Component)},803:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(29),r=n(30),i=n(32),c=n(31),o=n(33),s=n(0),l=n.n(s),u=n(192),d=n(100),h=n(777),p=u.a.TextArea,f=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={value:""},n.onChange=function(e){console.log(e),n.setState({value:e.target.value})},n.handleOk=function(){n.state.value?n.props.handleOk(n.state.value):d.a.error("\u8bf7\u586b\u5199")},n}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.visible===e.visible||e.visible||this.setState({value:""})}},{key:"render",value:function(){return l.a.createElement(h.a,{title:this.props.title,visible:this.props.visible,onOk:this.handleOk,onCancel:this.props.onCancel},l.a.createElement(p,{rows:4,onChange:this.onChange,value:this.state.value}))}}]),t}(l.a.Component);f.defaultProps={handleOk:function(){}}}}]);
//# sourceMappingURL=17.39d05863.chunk.js.map