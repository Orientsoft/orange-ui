(this.webpackJsonptemp=this.webpackJsonptemp||[]).push([[4,40,48],{396:function(e,t,a){"use strict";a.r(t),a.d(t,"getAdvList",(function(){return r})),a.d(t,"addAdv",(function(){return o})),a.d(t,"editAdv",(function(){return i})),a.d(t,"deleteAdv",(function(){return l}));var n=a(68);function r(e){return Object(n.a)("get","/adv?location=".concat(e))}function o(e){return Object(n.a)("post","/adv",e)}function i(e,t){return Object(n.a)("put","/adv/".concat(e),t)}function l(e){return Object(n.a)("delete","/adv/".concat(e))}},404:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return b}));var n=a(101),r=a(29),o=a(30),i=a(32),l=a(31),c=a(33),s=a(0),u=a.n(s),p=a(100),d=a(43),f=a(824),m=a(853),h=a(789),y=(a(780),a(396)),b=function(e){function t(){var e,a;Object(r.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={visible:!1,data:[],initData:{},formCfg:[{label:"\u8df3\u8f6curl",key:"content",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8df3\u8f6curl!"}],type:"input"},{label:"\u5e7f\u544a\u56fe\u7247",key:"pic",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u516c\u53f8\u540d\u79f0!"}],type:"upload"}]},a.getPageData=function(){Object(y.getAdvList)(a.props.activeKey).then((function(e){1!==e.status?a.setState({data:[]}):a.setState({data:e.data})})).catch((function(e){console.log(e)}))},a.showModal=function(){a.setState({visible:!0,mode:"add",initData:{}})},a.showEdit=function(e){return function(){a.setState({visible:!0,mode:"edit",initData:e})}},a.onCancel=function(){a.setState({visible:!1,mode:"",initData:{}})},a.editHandle=function(e){Object(y.editAdv)(a.state.initData.id,e).then((function(e){if(1===e.status)return a.onCancel(),void a.getPageData();p.a.error("\u4fee\u6539\u5931\u8d25")})).catch((function(e){console.log(e)}))},a.addHandle=function(e){Object(y.addAdv)(Object(n.a)({},e,{location:a.props.activeKey,type:"url"})).then((function(e){if(1===e.status)return a.onCancel(),void a.getPageData();p.a.error("\u6dfb\u52a0\u5931\u8d25")})).catch((function(e){console.log(e)}))},a.onSubmit=function(e){console.log(e),e.pic?"add"!==a.state.mode?a.editHandle(e):a.addHandle(e):p.a.error("\u8bf7\u4e0a\u4f20\u56fe\u7247")},a.onConfirm=function(e){return function(){Object(y.deleteAdv)(e).then((function(t){if(1!==t.status)p.a.error("\u5220\u9664\u5931\u8d25");else{var n=a.state.data.filter((function(t){return t.id!==e}));a.setState({data:n})}})).catch((function(e){console.log(e)}))}},a}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getPageData()}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"adv-manage"},u.a.createElement(d.a,{onClick:this.showModal,type:"primary"},"\u6dfb\u52a0"),u.a.createElement(f.a,null),this.state.data.map((function(t){return u.a.createElement("div",{className:"adv-box",key:t.id},u.a.createElement("div",{className:"img-box ".concat(e.props.vertical?"wel":"nor")},u.a.createElement("img",{src:t.pic,alt:"",className:"".concat(e.props.vertical?"wel":"nor")}),u.a.createElement("div",{className:"action"},u.a.createElement(d.a,{type:"primary",style:{background:"#48CBC7",marginRight:"8px"},onClick:e.showEdit(t)},"\u7f16\u8f91"),u.a.createElement(m.a,{title:"\u786e\u5b9a\u5220\u9664?",okText:"\u662f",cancelText:"\u5426",onConfirm:e.onConfirm(t.id)},u.a.createElement(d.a,{type:"danger",style:{marginTop:"8px"}},"\u5220\u9664")))),u.a.createElement("div",{className:"jump"},"\u8df3\u8f6c\u94fe\u63a5:",u.a.createElement("span",null,u.a.createElement("a",{href:t.content,target:"_blank",rel:"noopener noreferrer"},"\u8be6\u60c5"))),u.a.createElement(f.a,null))})),u.a.createElement(h.a,{title:"add"===this.state.mode?"\u6dfb\u52a0":"\u4fee\u6539",visible:this.state.visible,formCfg:this.state.formCfg,initData:this.state.initData,onCancel:this.onCancel,onSubmit:this.onSubmit}))}}]),t}(u.a.Component)},780:function(e,t,a){},789:function(e,t,a){"use strict";var n,r,o=a(275),i=a(101),l=a(29),c=a(30),s=a(32),u=a(31),p=a(33),d=(a(794),a(0)),f=a.n(d),m=a(901),h=a(11),y=a(77),b=a(100),v=a(1087),g=a(192),k=a(1084),j=a(1088),E=a(1086),O=a(43),x=a(853),C=a(777),_=a(795),w=a.n(_),V=a(152),A=a(195),D=a(16),I=m.a.Option,S={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}},P=f.a.createElement("div",null,f.a.createElement(h.a,{type:"plus"}),f.a.createElement("div",{className:"ant-upload-text"},"Upload")),N={label:"label",value:"value",children:"children"};t.a=y.a.create({name:"form_modal"})((r=n=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={otherValues:{}},a.mapInit2=function(){setTimeout((function(){if(document.getElementById("map-containerpoi")){var e=new AMap.Map("map-containerpoi",{zoom:10});AMapUI.loadUI(["misc/PoiPicker"],(function(t){var n=new t({input:"pickerInput1"}),r=new AMap.Marker;n.on("poiPicked",(function(t){console.log(t.item.location),r.setMap(e),r.setPosition(t.item.location),a.setState({otherValues:Object(i.a)({},a.state.otherValues,{longitude:t.item.location.lng,latitude:t.item.location.lat})})}))}))}else console.log("not find")}))},a.handleChange=function(e){return function(t){console.log("info",t),"done"===t.file.status&&(1===t.file.response.status?(b.a.success("\u4e0a\u4f20\u6210\u529f"),a.setState({otherValues:Object(i.a)({},a.state.otherValues,Object(o.a)({},e,t.file.response.data[0]))})):b.a.error("\u4e0a\u4f20\u5931\u8d25")),"error "===t.file.status&&b.a.error("\u4e0a\u4f20\u5931\u8d25")}},a.onCreate=function(){a.props.form.validateFields((function(e,t){e||(console.log(t,a.state.otherValues),console.log(a.state.otherValues),a.props.onSubmit(Object(i.a)({},t,{},a.state.otherValues)))}))},a.onChange=function(e){a.value=e.target.value},a.addLabel=function(e){return function(){if(a.value){var t=a.state.otherValues[e]?a.state.otherValues[e].slice():[];t.push(a.value),a.setState({otherValues:Object(i.a)({},a.state.otherValues,Object(o.a)({},e,t))})}else b.a.error("\u8bf7\u8f93\u5165\u5185\u5bb9")}},a.confirm=function(e,t){return function(){var n=a.state.otherValues[t].filter((function(t){return t!==e}));a.setState({otherValues:Object(i.a)({},a.state.otherValues,Object(o.a)({},t,n))})}},a.renderFormItem=function(e){var t=D.a.getState().appStatus,n=a.props.form.getFieldDecorator;switch(e.type){case"timePicker":return f.a.createElement(y.a.Item,{key:e.key,label:e.label},n(e.key,{rules:e.rules,initialValue:a.props.initData[e.key]})(f.a.createElement(v.a,{format:"HH:mm"})));case"input":return f.a.createElement(y.a.Item,{key:e.key,label:e.label},n(e.key,{rules:e.rules,initialValue:a.props.initData[e.key]})(f.a.createElement(g.a,null)));case"treeSelect":return f.a.createElement(y.a.Item,{key:e.key,label:e.label},n(e.key,{rules:e.rules,initialValue:a.props.initData[e.key]})(f.a.createElement(k.a,{treeData:e.selectOptions,placeholder:"\u8bf7\u9009\u62e9",allowClear:!0})));case"select":return f.a.createElement(y.a.Item,{key:e.key,label:e.label},n(e.key,{rules:e.rules,initialValue:a.props.initData[e.key]})(f.a.createElement(m.a,{placeholder:"\u8bf7\u9009\u62e9"},e.selectOptions.map((function(e){return f.a.createElement(I,{key:e.value,value:e.value},e.text)})))));case"cascader":return f.a.createElement(y.a.Item,{key:e.key,label:e.label},n(e.key,{rules:e.rules,initialValue:a.props.initData[e.key]})(f.a.createElement(j.a,{fieldNames:e.fieldNames||N,options:e.selectOptions,placeholder:"\u8bf7\u9009\u62e9"})));case"upload":return f.a.createElement(y.a.Item,{required:!0,key:e.key,label:e.label},f.a.createElement(E.a,{className:"avatar-uploader",action:"".concat(A.a,"/upload"),onChange:a.handleChange(e.key),headers:{AccessToken:t.token},showUploadList:!1,beforeUpload:V.a,listType:"picture-card"},a.state.otherValues[e.key]?f.a.createElement("img",{alt:"",src:a.state.otherValues[e.key],style:{width:"100%"}}):P));case"multipleSelect":return f.a.createElement(y.a.Item,{key:e.key,label:e.label},n(e.key,{rules:e.rules,initialValue:a.props.initData[e.key]})(f.a.createElement(m.a,{mode:"multiple",placeholder:"\u8bf7\u9009\u62e9"},e.selectOptions.map((function(e){return f.a.createElement(I,{key:e.value,value:e.value},e.text)})))));case"longitudelatitudepoi":return f.a.createElement("div",{key:"longitudelatitudepoi",style:{marginTop:"16px",marginBottom:"16px"}},f.a.createElement(y.a.Item,{label:"\u7ecf\u7eac\u5ea6"},a.state.otherValues.longitude," ,",a.state.otherValues.latitude),f.a.createElement("div",{id:"map-containerpoi"}),f.a.createElement("div",{id:"pickerBox"},f.a.createElement("input",{id:"pickerInput1",placeholder:"\u8f93\u5165\u5173\u952e\u5b57\u9009\u53d6\u5730\u70b9"})));case"braftEditor":return f.a.createElement(y.a.Item,{key:e.key,label:e.label},n(e.key,{initialValue:w.a.createEditorState(a.props.initData[e.key]),validateTrigger:"onBlur",rules:[{required:!0,validator:function(e,t,a){t.isEmpty()?a("\u8bf7\u8f93\u5165\u6b63\u6587\u5185\u5bb9"):a()}}]})(f.a.createElement(w.a,{className:"my-editor",placeholder:"\u8bf7\u8f93\u5165\u6b63\u6587\u5185\u5bb9"})));case"tagInput":var r=a.state.otherValues[e.key]||[];return f.a.createElement(y.a.Item,{required:!0,key:e.key,label:e.label},f.a.createElement(g.a,{onChange:a.onChange,style:{width:"200px",marginRight:"16px"}}),f.a.createElement(O.a,{onClick:a.addLabel(e.key),type:"primary"},"\u6dfb\u52a0"),f.a.createElement("div",{style:{marginTop:"8px"}},r.map((function(t){return f.a.createElement(x.a,{key:t,title:"\u786e\u5b9a\u5220\u9664?",onConfirm:a.confirm(t,e.key),okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},f.a.createElement(O.a,{type:"primary",style:{marginRight:"8px"}},t,f.a.createElement(h.a,{type:"close-circle"})))}))));case"default":return f.a.createElement(y.a.Item,{key:e.key,label:e.label},e.defaultValue)}},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){if(this.props.visible!==e.visible&&!e.visible){for(var t={},a=this.props.initKeys,n=0;n<a.length;n+=1)t[a[n]]=this.props.initData[a[n]];this.setState({otherValues:Object(i.a)({latitude:this.props.initData.latitude,longitude:this.props.initData.longitude,pic:this.props.initData.pic},t)}),this.mapInit2()}}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.title,r=e.formCfg,o=e.width;return f.a.createElement(C.a,{visible:t,title:n,onCancel:a,onOk:this.onCreate,width:o},t&&f.a.createElement(y.a,Object.assign({},S,{layout:"vertical"}),r.map(this.renderFormItem)))}}]),t}(f.a.Component),n.defaultProps={initKeys:[]},r))},808:function(e,t,a){var n=a(383),r=a(381);e.exports=function(e){return null!=e&&r(e.length)&&!n(e)}},809:function(e,t,a){(function(e){var n=a(154),r=a(832),o=t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,l=i&&i.exports===o?n.Buffer:void 0,c=(l?l.isBuffer:void 0)||r;e.exports=c}).call(this,a(378)(e))},810:function(e,t,a){var n=a(833),r=a(834),o=a(835),i=o&&o.isTypedArray,l=i?r(i):n;e.exports=l},815:function(e,t,a){var n=a(375),r=a(825),o=a(826),i=a(827),l=a(828),c=a(829);function s(e){var t=this.__data__=new n(e);this.size=t.size}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=l,s.prototype.set=c,e.exports=s},816:function(e,t){var a=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||a)}},817:function(e,t){e.exports=function(e){return e}},824:function(e,t,a){"use strict";var n=a(0),r=a(3),o=a.n(r),i=a(110);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var s=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};t.a=function(e){return n.createElement(i.a,null,(function(t){var a,r=t.getPrefixCls,i=e.prefixCls,u=e.type,p=void 0===u?"horizontal":u,d=e.orientation,f=void 0===d?"center":d,m=e.className,h=e.children,y=e.dashed,b=s(e,["prefixCls","type","orientation","className","children","dashed"]),v=r("divider",i),g=f.length>0?"-".concat(f):f,k=o()(m,v,"".concat(v,"-").concat(p),(c(a={},"".concat(v,"-with-text").concat(g),h),c(a,"".concat(v,"-dashed"),!!y),a));return n.createElement("div",l({className:k},b,{role:"separator"}),h&&n.createElement("span",{className:"".concat(v,"-inner-text")},h))}))}},825:function(e,t,a){var n=a(375);e.exports=function(){this.__data__=new n,this.size=0}},826:function(e,t){e.exports=function(e){var t=this.__data__,a=t.delete(e);return this.size=t.size,a}},827:function(e,t){e.exports=function(e){return this.__data__.get(e)}},828:function(e,t){e.exports=function(e){return this.__data__.has(e)}},829:function(e,t,a){var n=a(375),r=a(384),o=a(382);e.exports=function(e,t){var a=this.__data__;if(a instanceof n){var i=a.__data__;if(!r||i.length<199)return i.push([e,t]),this.size=++a.size,this;a=this.__data__=new o(i)}return a.set(e,t),this.size=a.size,this}},830:function(e,t,a){var n=a(154).Uint8Array;e.exports=n},831:function(e,t){e.exports=function(e,t){return function(a){return e(t(a))}}},832:function(e,t){e.exports=function(){return!1}},833:function(e,t,a){var n=a(197),r=a(381),o=a(196),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&r(e.length)&&!!i[n(e)]}},834:function(e,t){e.exports=function(e){return function(t){return e(t)}}},835:function(e,t,a){(function(e){var n=a(401),r=t&&!t.nodeType&&t,o=r&&"object"==typeof e&&e&&!e.nodeType&&e,i=o&&o.exports===r&&n.process,l=function(){try{var e=o&&o.require&&o.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(t){}}();e.exports=l}).call(this,a(378)(e))},836:function(e,t,a){var n=a(837),r=a(385),o=a(155),i=a(809),l=a(277),c=a(810),s=Object.prototype.hasOwnProperty;e.exports=function(e,t){var a=o(e),u=!a&&r(e),p=!a&&!u&&i(e),d=!a&&!u&&!p&&c(e),f=a||u||p||d,m=f?n(e.length,String):[],h=m.length;for(var y in e)!t&&!s.call(e,y)||f&&("length"==y||p&&("offset"==y||"parent"==y)||d&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||l(y,h))||m.push(y);return m}},837:function(e,t){e.exports=function(e,t){for(var a=-1,n=Array(e);++a<e;)n[a]=t(a);return n}}}]);
//# sourceMappingURL=4.40c8879c.chunk.js.map