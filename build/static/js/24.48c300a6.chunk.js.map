{"version":3,"sources":["pages/sys/user/index.js","pages/sys/user/service.js"],"names":["roleCfg","1","2","3","4","Home","p","getPageData","getUserList","state","current","then","res","status","setState","dataSource","data","total","catch","e","console","log","onChangePage","page","this","columns","title","dataIndex","key","align","render","v","map","value","join","bordered","pagination","rowKey","getRowKey","size","className","onChange","style","float","marginTop","React","Component","Fetch"],"mappings":"kPAKMA,EAAU,CACdC,EAAG,2BACHC,EAAG,iCACHC,EAAG,iCACHC,EAAG,kCAGgBC,E,YACnB,WAAYC,GAAI,IAAD,8BACb,4CAAMA,KAWRC,YAAc,WACZC,sBAAY,EAAKC,MAAMC,SACpBC,MAAK,SAAAC,GACe,IAAfA,EAAIC,OAIR,EAAKC,SAAS,CAAEC,WAAY,KAH1B,EAAKD,SAAS,CAAEC,WAAYH,EAAII,KAAMC,MAAOL,EAAIK,WAKpDC,OAAM,SAAAC,GACLC,QAAQC,IAAIF,OAtBH,EAyBfG,aAAe,SAAAC,GACb,EAAKT,SAAS,CACZJ,QAASa,IACR,WACD,EAAKhB,kBA3BP,EAAKE,MAAQ,CACXC,QAAS,EACTO,MAAO,EACPF,WAAY,IALD,E,iFAUbS,KAAKjB,gB,+BAuBL,IAAMkB,EAAU,CACd,CACEC,MAAO,qBACPC,UAAW,QACXC,IAAK,QACLC,MAAO,UAET,CACEH,MAAO,eACPC,UAAW,SACXC,IAAK,SACLC,MAAO,UAET,CACEH,MAAO,eACPC,UAAW,OACXC,IAAK,OACLC,MAAO,SACPC,OAAQ,SAAAC,GACN,OAAOA,EAAEC,KAAI,SAAAC,GAAK,OAAIjC,EAAQiC,MAAQC,KAAK,YAG/C,CACER,MAAO,2BACPC,UAAW,QACXC,IAAK,QACLC,MAAO,SACPC,OAAQ,SAAAC,GACN,OAAOA,EAAIA,EAAEG,KAAK,UAAO,KAG7B,CACER,MAAO,2BACPC,UAAW,UACXC,IAAK,UACLC,MAAO,SACPC,OAAQ,SAAAC,GACN,OAAOA,EAAIA,EAAEG,KAAK,UAAO,MAI/B,OACE,6BACE,kBAAC,IAAD,CACEC,UAAQ,EACRpB,WAAYS,KAAKf,MAAMM,WACvBU,QAASA,EACTW,YAAY,EACZC,OAAQC,IACRC,KAAK,UAEP,yBAAKC,UAAU,YACb,kBAAC,IAAD,CACE9B,QAASc,KAAKf,MAAMC,QACpBO,MAAOO,KAAKf,MAAMQ,MAClBwB,SAAUjB,KAAKF,aACfoB,MAAO,CAAEC,MAAO,QAASC,UAAW,gB,GA1FdC,IAAMC,Y,iCCZxC,+DAEO,SAAStC,EAAYe,GACxB,OAAOwB,YAAM,MAAD,qBAAsBxB,EAAtB","file":"static/js/24.48c300a6.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Table, Pagination } from \"antd\";\r\nimport { getRowKey } from \"../../../utils/util\";\r\nimport { getUserList } from \"./service\";\r\n\r\nconst roleCfg = {\r\n  1: \"普通用户\",\r\n  2: \"医院管理员\",\r\n  3: \"医院收费员\",\r\n  4: \"超级管理员\"\r\n};\r\n\r\nexport default class Home extends React.Component {\r\n  constructor(p) {\r\n    super(p);\r\n    this.state = {\r\n      current: 1,\r\n      total: 0,\r\n      dataSource: []\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getPageData();\r\n  }\r\n  getPageData = () => {\r\n    getUserList(this.state.current)\r\n      .then(res => {\r\n        if (res.status === 1) {\r\n          this.setState({ dataSource: res.data, total: res.total });\r\n          return;\r\n        }\r\n        this.setState({ dataSource: [] });\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  };\r\n  onChangePage = page => {\r\n    this.setState({\r\n      current: page,\r\n    }, () => {\r\n      this.getPageData();\r\n    });\r\n  };\r\n  render() {\r\n    const columns = [\r\n      {\r\n        title: \"手机号\",\r\n        dataIndex: \"phone\",\r\n        key: \"phone\",\r\n        align: \"center\"\r\n      },\r\n      {\r\n        title: \"状态\",\r\n        dataIndex: \"status\",\r\n        key: \"status\",\r\n        align: \"center\"\r\n      },\r\n      {\r\n        title: \"角色\",\r\n        dataIndex: \"role\",\r\n        key: \"role\",\r\n        align: \"center\",\r\n        render: v => {\r\n          return v.map(value => roleCfg[value]).join('、')\r\n        }\r\n      },\r\n      {\r\n        title: \"管理医院\",\r\n        dataIndex: \"admin\",\r\n        key: \"admin\",\r\n        align: \"center\",\r\n        render: v => {\r\n          return v ? v.join('、') : '';\r\n        }\r\n      },\r\n      {\r\n        title: \"收费医院\",\r\n        dataIndex: \"toolman\",\r\n        key: \"toolman\",\r\n        align: \"center\",\r\n        render: v => {\r\n          return v ? v.join('、') : '';\r\n        }\r\n      },\r\n    ];\r\n    return (\r\n      <div>\r\n        <Table\r\n          bordered\r\n          dataSource={this.state.dataSource}\r\n          columns={columns}\r\n          pagination={false}\r\n          rowKey={getRowKey}\r\n          size=\"small\"\r\n        />\r\n        <div className=\"clearfix\">\r\n          <Pagination\r\n            current={this.state.current}\r\n            total={this.state.total}\r\n            onChange={this.onChangePage}\r\n            style={{ float: \"right\", marginTop: \"16px\" }}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import Fetch from '../../../utils/fetch';\r\n\r\nexport function getUserList(page) {\r\n    return Fetch('get', `/user?page=${page}&limit=10`);\r\n}\r\n"],"sourceRoot":""}