{"version":3,"sources":["pages/sys/hospitalList/index.js","pages/sys/hospitalList/service.js","components/comTable/index.js","components/previewModal/index.js"],"names":["Home","p","getPageData","getHospitalList","state","current","then","res","status","setState","dataSource","data","map","v","operation","catch","e","console","log","onChangePage","page","showPreview","url","draft","previewVisible","previewImage","renderMode","previewHandleCancel","showContent","record","selectRow","total","this","columns","title","dataIndex","key","align","render","text","className","onClick","join","src","alt","style","height","handleCancel","React","Component","Fetch","props","marginTop","bordered","pagination","rowKey","getRowKey","size","onChange","float","PreviewModal","visible","footer","onCancel","width","dangerouslySetInnerHTML","__html"],"mappings":"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","file":"static/js/20.c529480e.chunk.js","sourcesContent":["import React from \"react\";\r\nimport ComTable from \"../../../components/comTable\";\r\nimport PreviewModal from \"../../../components/previewModal\";\r\nimport { getHospitalList,  } from \"./service\";\r\n\r\nexport default class Home extends React.Component {\r\n  constructor(p) {\r\n    super(p);\r\n    this.state = {\r\n      selectRow: {},\r\n      previewVisible: false,\r\n      previewImage: \"\",\r\n      current: 1,\r\n      total: 1,\r\n      dataSource: [],\r\n      renderMode: '',\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getPageData();\r\n  }\r\n  getPageData = () => {\r\n    getHospitalList(this.state.current)\r\n      .then(res => {\r\n        if (res.status === 1) {\r\n          const dataSource = res.data.map(v => {\r\n            if(v.operation){\r\n              return { ...v, ...v.operation }\r\n            }\r\n            return v;\r\n          });\r\n          this.setState({ dataSource });\r\n          return;\r\n        }\r\n        this.setState({ dataSource: [] });\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  };\r\n  onChangePage = page => {\r\n    this.setState(\r\n      {\r\n        current: page\r\n      },\r\n      () => {\r\n        this.getPageData();\r\n      }\r\n    );\r\n  };\r\n  \r\n  showPreview = (url, draft) => () => {\r\n    this.setState({ previewVisible: true, previewImage: url, renderMode: draft });\r\n  };\r\n  previewHandleCancel = () => {\r\n    this.setState({ previewVisible: false, previewImage: \"\" });\r\n  };\r\n  showContent = (record) => () => {\r\n\r\n  }\r\n\r\n  render() {\r\n    const columns = [\r\n      {\r\n        title: \"医院名称\",\r\n        dataIndex: \"name\",\r\n        key: \"name\",\r\n        align: \"center\"\r\n      },\r\n      {\r\n        title: \"医院简介\",\r\n        dataIndex: \"content\",\r\n        key: \"content\",\r\n        align: \"center\",\r\n        render: text => {\r\n          return (\r\n            <span className=\"canClick\" onClick={this.showPreview(text, 'draft')}>详情</span>\r\n          );\r\n        }\r\n      },      \r\n      {\r\n        title: \"特色科室\",\r\n        dataIndex: \"department\",\r\n        key: \"department\",\r\n        align: \"center\",\r\n        render: v => {\r\n          if (!v) {\r\n            return null;\r\n          }\r\n          return v.join('、');\r\n        }\r\n      },\r\n      {\r\n        title: \"标签\",\r\n        dataIndex: \"tag\",\r\n        key: \"tag\",\r\n        align: \"center\",\r\n        render: v => {\r\n          if (!v) {\r\n            return null;\r\n          }\r\n          return v.join('、');\r\n        }\r\n      },\r\n      {\r\n        title: \"联系电话\",\r\n        dataIndex: \"phone\",\r\n        key: \"phone\",\r\n        align: \"center\"\r\n      },\r\n      {\r\n        title: \"医院logo\",\r\n        dataIndex: \"logo\",\r\n        key: \"logo\",\r\n        align: \"center\",\r\n        render: text => {\r\n          return (\r\n            <img\r\n              onClick={this.showPreview(text)}\r\n              src={text}\r\n              alt=\"\"\r\n              style={{ height: \"20px\" }}\r\n              className=\"canClick\"\r\n            />\r\n          );\r\n        }\r\n      },\r\n      {\r\n        title: \"医院大图\",\r\n        dataIndex: \"pic\",\r\n        key: \"pic\",\r\n        align: \"center\",\r\n        render: text => {\r\n          return (\r\n            <img\r\n              onClick={this.showPreview(text)}\r\n              src={text}\r\n              alt=\"\"\r\n              style={{ height: \"20px\" }}\r\n              className=\"canClick\"\r\n            />\r\n          );\r\n        }\r\n      },\r\n      {\r\n        title: \"详细地址\",\r\n        dataIndex: \"address\",\r\n        key: \"address\",\r\n        align: \"center\"\r\n      },\r\n      {\r\n        title: \"状态\",\r\n        dataIndex: \"is_show\",\r\n        key: \"is_show\",\r\n        align: \"center\",\r\n        render: (v) => {\r\n          return v ? '已上线' : '未上线';\r\n        }\r\n      },\r\n    ];\r\n    return (\r\n      <div>\r\n        <ComTable\r\n          current={this.state.current}\r\n          total={this.state.total}\r\n          columns={columns}\r\n          dataSource={this.state.dataSource}\r\n          onChangePage={this.onChangePage}\r\n        />\r\n        <PreviewModal\r\n          previewVisible={this.state.previewVisible}\r\n          previewImage={this.state.previewImage}\r\n          handleCancel={this.previewHandleCancel}\r\n          renderMode={this.state.renderMode}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import Fetch from '../../../utils/fetch';\r\n\r\nexport function getHospitalList(page) {\r\n    return Fetch('get', `/hospital/admin?page=${page}&limit=10`);\r\n}","import React from 'react';\r\nimport { Table, Pagination } from 'antd';\r\nimport { getRowKey } from '../../utils/util';\r\n\r\nexport default class Home extends React.Component {\r\n    render(){\r\n        const { columns, dataSource, current, total, onChangePage } = this.props;\r\n        console.log('total', total);\r\n        return (<div style={{ marginTop: '16px' }}>\r\n        <Table\r\n          bordered\r\n          dataSource={dataSource}\r\n          columns={columns}\r\n          pagination={false}\r\n          rowKey={getRowKey}\r\n          size=\"small\"\r\n        />\r\n        <div className='clearfix'>\r\n        <Pagination\r\n          current={current}\r\n          total={total}\r\n          // pageSize={2}\r\n          onChange={onChangePage}\r\n          style={{ float: 'right', marginTop: '16px' }}\r\n        />\r\n        </div>\r\n        </div>)\r\n    }\r\n}","import React from \"react\";\r\nimport { Modal } from \"antd\";\r\n\r\nexport default class PreviewModal extends React.Component {\r\n  render() {\r\n    const { previewVisible, previewImage, handleCancel, renderMode } = this.props;\r\n    console.log('renderMode', renderMode);\r\n    return (\r\n        <Modal\r\n          visible={previewVisible}\r\n          footer={null}\r\n          onCancel={handleCancel}\r\n          title='预览'\r\n          width={1024}\r\n        >\r\n          <div style={{ height: '800px' }} className='clearfix'>\r\n          {\r\n            renderMode === 'draft' ? <div dangerouslySetInnerHTML={{\r\n              __html: previewImage }}></div> : <img alt=\"example\" style={{ width: \"100%\", height: \"100%\" }} src={previewImage} />\r\n          }\r\n          </div>\r\n        </Modal>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}