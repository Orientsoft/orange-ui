{"version":3,"sources":["pages/mall/order/index.js","pages/mall/order/appointmentDetail.js","pages/mall/order/service.js","components/comTable/index.js"],"names":["statusCfg","0","1","2","3","4","payCfg","Order","p","getPageData","getOrderList","state","current","then","res","status","setState","dataSource","data","total","catch","e","console","log","onChangePage","page","showDetail","record","getOrderDetail","id","message","error","visible","detailData","onCancel","this","columns","title","dataIndex","key","align","render","v","name","renderTime","width","className","onClick","React","Component","CheckModal","props","footer","orderAt","phone","hospitalName","address","remark","Fetch","Home","style","marginTop","bordered","pagination","rowKey","getRowKey","size","onChange","float"],"mappings":"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","file":"static/js/12.0b25be18.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { message  } from \"antd\";\r\nimport ComTable from \"../../../components/comTable\";\r\nimport AppointmentDetail from './appointmentDetail';\r\nimport { getOrderList, getOrderDetail } from './service';\r\nimport { renderTime } from '../../../utils/util';\r\n\r\nconst statusCfg = {\r\n  0: '待支付',\r\n  1: '待预约',\r\n  2: '待使用',\r\n  3: '待评价',\r\n  4: '已完成',\r\n};\r\n\r\nconst payCfg = {\r\n  'WEIXINPAY': '微信',\r\n  'ALIPAY': '支付宝',\r\n};\r\n\r\nexport default class Order extends React.Component {\r\n  constructor(p) {\r\n    super(p);\r\n    this.state = {\r\n      visible: false,\r\n      current: 1,\r\n      total: 0,\r\n      dataSource: [],\r\n      detailData: {},\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getPageData();\r\n  }\r\n  getPageData = () => {\r\n    getOrderList(this.state.current)\r\n    .then((res) => {\r\n      if (res.status === 1) {\r\n        this.setState({ dataSource: res.data, total: res.total });\r\n        return;\r\n      }\r\n      this.setState({ dataSource: [] });\r\n    })\r\n    .catch((e) => {\r\n      console.log(e);\r\n    });\r\n  };\r\n  onChangePage = page => {\r\n    this.setState({\r\n      current: page,\r\n    }, () => {\r\n      this.getPageData();\r\n    });\r\n  };\r\n  showDetail = (record) => () => {\r\n    getOrderDetail(record.id)\r\n    .then((res) => {\r\n      if (res.status === 1) {\r\n        this.setState({ visible: true, detailData: res.data });\r\n        return;\r\n      }\r\n      message.error('暂无预约信息');\r\n    })\r\n    .catch((e) => {\r\n      console.log(e);\r\n    });\r\n  }\r\n  onCancel = () => {\r\n    this.setState({\r\n      visible: false,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const columns = [\r\n        {\r\n            title: \"产品\",\r\n            dataIndex: \"product\",\r\n            key: \"product\",\r\n            align: \"center\",\r\n            render: (v) => {\r\n              return v ? v.name : '';\r\n            }\r\n          },\r\n          {\r\n            title: \"购买价格\",\r\n            dataIndex: \"price\",\r\n            key: \"price\",\r\n            align: \"center\"\r\n          },\r\n          {\r\n            title: \"下单时间\",\r\n            dataIndex: \"createdAt\",\r\n            key: \"createdAt\",\r\n            align: \"center\",\r\n            render: renderTime,\r\n            width: 200,\r\n          },\r\n          {\r\n            title: \"付款方式\",\r\n            dataIndex: \"pay\",\r\n            key: \"pay\",\r\n            align: \"center\",\r\n            render: (v) => {\r\n              return payCfg[v];\r\n            }\r\n          },\r\n          {\r\n            title: \"付款时间\",\r\n            dataIndex: \"payAt\",\r\n            key: \"payAt\",\r\n            align: \"center\",\r\n            render: renderTime,\r\n            width: 200,\r\n          },\r\n          {\r\n            title: \"订单状态\",\r\n            dataIndex: \"status\",\r\n            key: \"status\",\r\n            align: \"center\",\r\n            render: (v) => {\r\n              return statusCfg[v];\r\n            }\r\n          },\r\n          {\r\n            title: \"预约\",\r\n            dataIndex: \"appoint\",\r\n            key: \"appoint\",\r\n            align: \"center\",\r\n            render: (v, record) => { return <span className='canClick' onClick={this.showDetail(record)}>详情</span>}\r\n          },\r\n    ];\r\n    return (\r\n      <div>\r\n        <ComTable\r\n          current={this.state.current}\r\n          total={this.state.total}\r\n          columns={columns}\r\n          dataSource={this.state.dataSource}\r\n          onChangePage={this.onChangePage}\r\n        />\r\n        <AppointmentDetail onCancel={this.onCancel} visible={this.state.visible} detailData={this.state.detailData}/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Modal  } from \"antd\";\r\nimport \"./index.scss\";\r\nimport { renderTime } from '../../../utils/util';\r\n\r\nexport default class CheckModal extends React.Component {\r\n  render() {\r\n    const { visible, onCancel, detailData } = this.props;\r\n    return (\r\n      <Modal\r\n        visible={visible}\r\n        title=\"订单预约详情\"\r\n        onCancel={onCancel}\r\n        footer={false}\r\n        width={1024}\r\n      >\r\n        <div className='appointment-detail'>\r\n          <ul>\r\n            <li className='item'>\r\n              <div className='title'>预约人:</div>\r\n              <div className='value'>{detailData.name}</div>\r\n            </li>\r\n            <li className='item'>\r\n              <div className='title'>预约时间:</div>\r\n              <div className='value'>{renderTime(detailData.orderAt)}</div>\r\n            </li>\r\n            <li className='item'>\r\n              <div className='title'>电话:</div>\r\n              <div className='value'>{detailData.phone}</div>\r\n            </li>\r\n            \r\n            <li className='item'>\r\n              <div className='title'>医院:</div>\r\n              <div className='value'>{detailData.hospitalName}</div>\r\n            </li>\r\n            <li className='item'>\r\n              <div className='title'>详细地址:</div>\r\n              <div className='value'>{detailData.address}</div>\r\n            </li>\r\n            <li className='item'>\r\n              <div className='title'>备注:</div>\r\n              <div className='value'>{detailData.remark}</div>\r\n            </li>\r\n          </ul>\r\n          </div>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n","import Fetch from '../../../utils/fetch';\r\n\r\nexport function getOrderList(page) {\r\n    return Fetch('get', `/order/admin?page=${page}&limit=10`);\r\n}\r\n\r\nexport function getOrderDetail(id) {\r\n    return Fetch('get', `/order/appointment/${id}`);\r\n}","import React from 'react';\r\nimport { Table, Pagination } from 'antd';\r\nimport { getRowKey } from '../../utils/util';\r\n\r\nexport default class Home extends React.Component {\r\n    render(){\r\n        const { columns, dataSource, current, total, onChangePage } = this.props;\r\n        console.log('total', total);\r\n        return (<div style={{ marginTop: '16px' }}>\r\n        <Table\r\n          bordered\r\n          dataSource={dataSource}\r\n          columns={columns}\r\n          pagination={false}\r\n          rowKey={getRowKey}\r\n          size=\"small\"\r\n        />\r\n        <div className='clearfix'>\r\n        <Pagination\r\n          current={current}\r\n          total={total}\r\n          // pageSize={2}\r\n          onChange={onChangePage}\r\n          style={{ float: 'right', marginTop: '16px' }}\r\n        />\r\n        </div>\r\n        </div>)\r\n    }\r\n}"],"sourceRoot":""}