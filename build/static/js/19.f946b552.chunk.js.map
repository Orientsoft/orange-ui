{"version":3,"sources":["pages/mall/comment/index.js","pages/mall/comment/service.js","components/comTable/index.js","components/previewModal/index.js"],"names":["Comment","p","getPageData","getCommentList","state","current","then","res","status","setState","dataSource","data","total","catch","e","console","log","onChangePage","page","showPreview","url","previewVisible","previewImage","previewHandleCancel","this","columns","title","dataIndex","key","align","render","text","onClick","src","alt","style","height","className","renderTime","handleCancel","React","Component","Fetch","Home","props","marginTop","bordered","pagination","rowKey","getRowKey","size","onChange","float","PreviewModal","renderMode","visible","footer","onCancel","width","dangerouslySetInnerHTML","__html"],"mappings":"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","file":"static/js/19.f946b552.chunk.js","sourcesContent":["import React from \"react\";\r\nimport ComTable from \"../../../components/comTable\";\r\nimport PreviewModal from \"../../../components/previewModal\";\r\nimport { getCommentList } from \"./service\";\r\nimport { renderTime } from \"../../../utils/util\";\r\n\r\nexport default class Comment extends React.Component {\r\n  constructor(p) {\r\n    super(p);\r\n    this.state = {\r\n      previewVisible: false,\r\n      previewImage: \"\",\r\n      current: 1,\r\n      total: 0,\r\n      dataSource: []\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getPageData();\r\n  }\r\n  getPageData = () => {\r\n    getCommentList(this.state.current)\r\n      .then(res => {\r\n        if (res.status === 1) {\r\n          this.setState({ dataSource: res.data, total: res.total });\r\n          return;\r\n        }\r\n        this.setState({ dataSource: [] });\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  };\r\n  onChangePage = page => {\r\n    this.setState(\r\n      {\r\n        current: page\r\n      },\r\n      () => {\r\n        this.getPageData();\r\n      }\r\n    );\r\n  };\r\n  showPreview = url => () => {\r\n    this.setState({ previewVisible: true, previewImage: url });\r\n  };\r\n  previewHandleCancel = () => {\r\n    this.setState({ previewVisible: false, previewImage: \"\" });\r\n  };\r\n  render() {\r\n    const columns = [\r\n      {\r\n        title: \"产品\",\r\n        dataIndex: \"productName\",\r\n        key: \"productName\",\r\n        align: \"center\"\r\n      },\r\n      {\r\n        title: \"产品LOGO\",\r\n        dataIndex: \"productLogo\",\r\n        key: \"productLogo\",\r\n        align: \"center\",\r\n        render: text => {\r\n          return (\r\n            <img\r\n              onClick={this.showPreview(text)}\r\n              src={text}\r\n              alt=\"\"\r\n              style={{ height: \"20px\" }}\r\n              className=\"canClick\"\r\n            />\r\n          );\r\n        }\r\n      },\r\n      {\r\n        title: \"评论者\",\r\n        dataIndex: \"commentName\",\r\n        key: \"commentName\",\r\n        align: \"center\"\r\n      },\r\n      {\r\n        title: \"评论时间\",\r\n        dataIndex: \"commentAt\",\r\n        key: \"commentAt\",\r\n        align: \"center\",\r\n        render: renderTime\r\n      },\r\n      {\r\n        title: \"回复\",\r\n        dataIndex: \"answer\",\r\n        key: \"answer\",\r\n        align: \"center\"\r\n      },\r\n      {\r\n        title: \"回复时间\",\r\n        dataIndex: \"answerAt\",\r\n        key: \"answerAt\",\r\n        align: \"center\",\r\n        render: renderTime\r\n      }\r\n    ];\r\n    return (\r\n      <div>\r\n        <ComTable\r\n          current={this.state.current}\r\n          total={this.state.total}\r\n          columns={columns}\r\n          dataSource={this.state.dataSource}\r\n          onChangePage={this.onChangePage}\r\n        />\r\n        <PreviewModal\r\n          previewVisible={this.state.previewVisible}\r\n          previewImage={this.state.previewImage}\r\n          handleCancel={this.previewHandleCancel}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import Fetch from '../../../utils/fetch';\r\n\r\nexport function getCommentList(page) {\r\n    return Fetch('get', `/product/comment?page=${page}&limit=10`);\r\n}\r\n","import React from 'react';\r\nimport { Table, Pagination } from 'antd';\r\nimport { getRowKey } from '../../utils/util';\r\n\r\nexport default class Home extends React.Component {\r\n    render(){\r\n        const { columns, dataSource, current, total, onChangePage } = this.props;\r\n        console.log('total', total);\r\n        return (<div style={{ marginTop: '16px' }}>\r\n        <Table\r\n          bordered\r\n          dataSource={dataSource}\r\n          columns={columns}\r\n          pagination={false}\r\n          rowKey={getRowKey}\r\n          size=\"small\"\r\n        />\r\n        <div className='clearfix'>\r\n        <Pagination\r\n          current={current}\r\n          total={total}\r\n          // pageSize={2}\r\n          onChange={onChangePage}\r\n          style={{ float: 'right', marginTop: '16px' }}\r\n        />\r\n        </div>\r\n        </div>)\r\n    }\r\n}","import React from \"react\";\r\nimport { Modal } from \"antd\";\r\n\r\nexport default class PreviewModal extends React.Component {\r\n  render() {\r\n    const { previewVisible, previewImage, handleCancel, renderMode } = this.props;\r\n    console.log('renderMode', renderMode);\r\n    return (\r\n        <Modal\r\n          visible={previewVisible}\r\n          footer={null}\r\n          onCancel={handleCancel}\r\n          title='预览'\r\n          width={1024}\r\n        >\r\n          <div style={{ height: '800px' }} className='clearfix'>\r\n          {\r\n            renderMode === 'draft' ? <div dangerouslySetInnerHTML={{\r\n              __html: previewImage }}></div> : <img alt=\"example\" style={{ width: \"100%\", height: \"100%\" }} src={previewImage} />\r\n          }\r\n          </div>\r\n        </Modal>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}